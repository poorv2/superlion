var _require = require('./src/config/web3'),
    setWeb3Provider = _require.setWeb3Provider;

var _require2 = require('./src/config/singletons'),
    setSingletonsConfig = _require2.setSingletonsConfig;

var _require3 = require('util'),
    deprecate = _require3.deprecate;

var setEnvironment = deprecate(function(environment) {
    return setSingletonsConfig({
        abstraction: environment
    });
}, 'The \'environment\' configuration option is deprecated, use \'singletons.abstraction\' instead.');
var configLoaded = false;

function configure(config) {
    if (!config) {
        // If there is a config already loaded keep it
        if (!configLoaded) {
            defaultConfigure();
            configLoaded = true;
        }
    } else {
        customConfigure(config);
        configLoaded = true;
    }
}

;

function defaultConfigure() {
    setWeb3Provider.default();
    setSingletonsConfig.default();
}

function customConfigure(config) {
    defaultConfigure();

    if ('provider' in config) {
        // The provider may be either an URL to an HTTP endpoint, or a complete provider object
        setWeb3Provider(config.provider);
    }

    if ('singletons' in config) {
        setSingletonsConfig(config.singletons);
    } else if ('environment' in config) {
        setEnvironment(config.environment);
    }
}

module.exports = configure;